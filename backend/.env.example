# PolyEdge Backend Configuration
# Copy this file to .env and fill in your values

# Environment
ENVIRONMENT=development
DEBUG=true

# Supabase (Required for production)
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# AWS SES for email alerts (Optional for MVP)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
SES_SENDER_EMAIL=alerts@polyedge.io

# External APIs (Leave empty to use mock data)
# These are only needed when USE_MOCK_DATA=false

# NewsAPI.org - Get key at https://newsapi.org/register
NEWSAPI_KEY=

# Twitter/X API - Get Bearer token from developer.twitter.com
TWITTER_BEARER_TOKEN=

# Feature Flags
# Set to false when ready to use real APIs
USE_MOCK_DATA=true

# Signal Generation Thresholds
# These control when signals are generated
SENTIMENT_DIVERGENCE_THRESHOLD=0.20  # Min divergence between sentiment and price
VOLUME_SURGE_MULTIPLIER=3.0          # Volume must be Nx above average
SOCIAL_SPIKE_MULTIPLIER=5.0          # Mentions must be Nx above average
PRICE_MOMENTUM_THRESHOLD=0.10        # Min price change for momentum signal

# ============================================
# Signal Scanner Configuration
# ============================================
# Minimum confidence score for signal generation (0.0-1.0)
SIGNAL_MIN_CONFIDENCE=0.5

# Watchlist of market slugs to monitor (comma-separated)
# These are scanned when POST /api/signals/scan is called
# Example high-volume, news-sensitive markets for POC:
SIGNAL_WATCHLIST=russia-x-ukraine-ceasefire-in-2025,us-recession-in-2025,will-bitcoin-reach-150000-by-december-31-2025-188,will-ethereum-hit-5000-by-december-31-796-376,khamenei-out-as-supreme-leader-of-iran-in-2025

# Discovery Settings (find additional high-volume markets beyond watchlist)
SIGNAL_DISCOVERY_ENABLED=false        # Enable auto-discovery of markets
SIGNAL_DISCOVERY_MAX_MARKETS=5        # Max markets to discover per scan
SIGNAL_DISCOVERY_MIN_VOLUME=1000000   # Minimum volume for discovered markets

# API Rate Limit Handling
SKIP_NEWS_API=false                   # Disable NewsAPI calls (use if rate limited)
SKIP_SOCIAL_API=true                  # Disable Twitter API (expensive, disabled by default)
API_RETRY_AFTER_MINUTES=15            # Minutes to wait after rate limit before retry

# ============================================
# Signal Tracking Configuration
# ============================================
# Enable background tracking of signal performance
TRACKING_ENABLED=true

# How often to run tracking updates (in minutes)
# Signals get 1h/24h/7d checkpoints as time elapses
TRACKING_INTERVAL_MINUTES=60

# Days before ACTIVE signals are marked EXPIRED
TRACKING_EXPIRE_DAYS=30

# ============================================
# Signal Quality Filters
# ============================================
# These settings prevent low-quality signals from being generated

# Skip markets that expire sooner than this many days
MIN_DAYS_TO_EXPIRY=7

# Skip markets below this tier (THIN, LOW, MEDIUM, HIGH)
# THIN = <$10k volume, LOW = <$25k, MEDIUM = <$95k, HIGH = >$95k
MIN_MARKET_TIER=LOW

# Skip markets with prices at extremes (near-certainty markets)
MIN_PRICE_FOR_SIGNALS=0.05   # Skip markets below 5% probability
MAX_PRICE_FOR_SIGNALS=0.95   # Skip markets above 95% probability

# Sentiment divergence rule improvements
# Require strong directional sentiment (prevents neutral sentiment from triggering)
MIN_SENTIMENT_STRENGTH=0.3   # Require |sentiment| > 0.3 (range: -1 to 1)

# Require minimum articles for statistical confidence
MIN_ARTICLE_COUNT=5          # At least 5 articles about the topic
